<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Railway Reservation System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="train-icon"></span>
                <h1>RailYatra</h1>
            </div>
            <ul class="nav-menu">
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="my-bookings.html" class="nav-link">My Booking</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h2>Your Journey, Our Priority</h2>
            <p>Book your railway tickets with ease and comfort</p>
            <div class="hero-buttons">
                <button class="cta-button" onclick="scrollToSection('booking')"><span>Book Now</span></button>
                <button class="cta-button" onclick="goToTrainsPage()" style="margin-left: 12px;"><span>View All Trains</span></button>
            </div>
        </div>
    </section>


    <!-- Featured Trains Section -->
    <section class="trains-section" id="trains" style="display:none;">
        <div class="container">
            <h2 class="section-title">All Available Trains</h2>
            <div class="trains-grid" id="trainsContainer">
                <!-- Trains will be populated here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <section class="booking-section" id="booking">
        <div class="container">
            <h2 class="section-title">Book Your Ticket</h2>
            <div class="booking-form">
                <div class="form-group autocomplete-wrapper">
                    <div class="autocomplete-container floating-label-container">
                        <input type="text" id="source" class="autocomplete-input floating-input" placeholder=" " autocomplete="off" required>
                        <label for="source" class="floating-label">From - PLACES NAME</label>
                        <div class="autocomplete-dropdown" id="sourceDropdown"></div>
                    </div>
                </div>

                <div class="form-group autocomplete-wrapper">
                    <div class="autocomplete-container floating-label-container">
                        <input type="text" id="destination" class="autocomplete-input floating-input" placeholder=" " autocomplete="off" required>
                        <label for="destination" class="floating-label">To - PLACES NAME</label>
                        <div class="autocomplete-dropdown" id="destinationDropdown"></div>
                    </div>
                </div>

                <button class="search-button" onclick="searchTrains()">Search Trains</button>

                <div id="searchResults" style="display:none; margin-top: 30px;">
                    <div class="results-header">
                        <h3>Available Trains</h3>
                        <button class="toggle-filters-btn" onclick="toggleFilterPanel()">
                            <span class="filter-icon">üîç</span>
                            <span>Filters</span>
                        </button>
                    </div>
                    
                    <!-- Filter Panel -->
                    <div class="filter-panel" id="filterPanel">
                        <div class="filter-header">
                            <h4>Filter Trains</h4>
                            <button class="close-filters-btn" onclick="toggleFilterPanel()">√ó</button>
                        </div>
                        
                        <div class="filter-content">
                            <!-- Class Type Filter -->
                            <div class="filter-group">
                                <label class="filter-label">Class Type</label>
                                <div class="filter-checkboxes">
                                    <label class="filter-checkbox">
                                        <input type="checkbox" class="filter-class" value="SL" onchange="applyFilters()">
                                        <span>SL</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" class="filter-class" value="3A" onchange="applyFilters()">
                                        <span>3A</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" class="filter-class" value="2A" onchange="applyFilters()">
                                        <span>2A</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" class="filter-class" value="1A" onchange="applyFilters()">
                                        <span>1A</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Price Sort -->
                            <div class="filter-group">
                                <label class="filter-label">Sort by Price</label>
                                <select class="filter-select" id="priceSort" onchange="applyFilters()">
                                    <option value="">No Sorting</option>
                                    <option value="low-high">Low to High</option>
                                    <option value="high-low">High to Low</option>
                                </select>
                            </div>
                            
                            <!-- Departure Time Range -->
                            <div class="filter-group">
                                <label class="filter-label">Departure Time</label>
                                <div class="time-range-inputs">
                                    <input type="time" class="filter-time" id="departureTimeFrom" onchange="applyFilters()" placeholder="From">
                                    <span class="time-separator">to</span>
                                    <input type="time" class="filter-time" id="departureTimeTo" onchange="applyFilters()" placeholder="To">
                                </div>
                            </div>
                            
                            <!-- Train Type Filter -->
                            <div class="filter-group">
                                <label class="filter-label">Train Type</label>
                                <div class="filter-checkboxes">
                                    <label class="filter-checkbox">
                                        <input type="checkbox" class="filter-train-type" value="Express" onchange="applyFilters()">
                                        <span>Express</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" class="filter-train-type" value="Superfast" onchange="applyFilters()">
                                        <span>Superfast</span>
                                    </label>
                                    <label class="filter-checkbox">
                                        <input type="checkbox" class="filter-train-type" value="Rajdhani" onchange="applyFilters()">
                                        <span>Rajdhani</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Reset Filters -->
                            <button class="reset-filters-btn" onclick="resetFilters()">Reset All Filters</button>
                        </div>
                    </div>
                    
                    <div class="results-count" id="resultsCount"></div>
                    <div class="search-results-list" id="resultsList"></div>
                </div>
            </div>

            <!-- Passenger & Ticket Details -->
            <div id="ticketForm" style="display:none; margin-top: 40px;">
                <h3>Passenger Information</h3>
                <form class="booking-form" onsubmit="bookTicket(event)">
                    <div class="form-group">
                        <label for="passengerName">Passenger Name:</label>
                        <input type="text" id="passengerName" placeholder="Enter your name" required>
                    </div>

                    <div class="form-group">
                        <label for="age">Age:</label>
                        <input type="number" id="age" placeholder="Enter your age" required>
                    </div>

                    <div class="form-group">
                        <label for="gender">Gender:</label>
                        <select id="gender" required>
                            <option value="">-- Select Gender --</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" placeholder="Enter your email address" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number:</label>
                        <input type="tel" id="phone" placeholder="Enter your phone number" required>
                    </div>

                    <div class="form-group">
                        <label for="numSeats">Number of Seats:</label>
                        <div class="seat-selector">
                            <button type="button" class="seat-btn" onclick="decreaseSeats()">‚àí</button>
                            <input type="number" id="numSeats" value="1" min="1" max="6" readonly>
                            <button type="button" class="seat-btn" onclick="increaseSeats()">+</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="classSelect">Class:</label>
                        <select id="classSelect" required>
                            <option value="">-- Choose a class --</option>
                            <option value="1A">1A (First Class)</option>
                            <option value="2A">2A (Second Class)</option>
                            <option value="3A">3A (Third Class)</option>
                            <option value="3E">3E (Economy)</option>
                            <option value="SL">SL (Sleeper)</option>
                        </select>
                    </div>

                    <!-- Payment Section -->
                    <div class="payment-section">
                        <h3 style="margin-top: 2rem; margin-bottom: 1.5rem; color: #1e3a8a; font-size: 1.5rem;">Payment Details</h3>
                        
                        <div class="form-group">
                            <label for="paymentMethod">Payment Method:</label>
                            <select id="paymentMethod" required onchange="togglePaymentFields()">
                                <option value="">-- Select Payment Method --</option>
                                <option value="credit">Credit Card</option>
                                <option value="debit">Debit Card</option>
                                <option value="upi">UPI</option>
                                <option value="netbanking">Net Banking</option>
                                <option value="wallet">Wallet</option>
                            </select>
                        </div>

                        <!-- Credit/Debit Card Fields -->
                        <div id="cardFields" style="display:none;">
                            <div class="form-group">
                                <label for="cardNumber">Card Number:</label>
                                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="cardExpiry">Expiry Date:</label>
                                    <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5" oninput="formatExpiry(this)">
                                </div>
                                <div class="form-group">
                                    <label for="cardCVV">CVV:</label>
                                    <input type="text" id="cardCVV" placeholder="123" maxlength="4" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="cardName">Cardholder Name:</label>
                                <input type="text" id="cardName" placeholder="Name on card">
                            </div>
                        </div>

                        <!-- UPI Fields -->
                        <div id="upiFields" style="display:none;">
                            <div class="form-group">
                                <label for="upiId">UPI ID:</label>
                                <input type="text" id="upiId" placeholder="yourname@upi">
                            </div>
                        </div>

                        <!-- Net Banking Fields -->
                        <div id="netbankingFields" style="display:none;">
                            <div class="form-group">
                                <label for="bankName">Select Bank:</label>
                                <select id="bankName">
                                    <option value="">-- Select Bank --</option>
                                    <option value="SBI">State Bank of India</option>
                                    <option value="HDFC">HDFC Bank</option>
                                    <option value="ICICI">ICICI Bank</option>
                                    <option value="Axis">Axis Bank</option>
                                    <option value="PNB">Punjab National Bank</option>
                                    <option value="BOI">Bank of India</option>
                                    <option value="BOB">Bank of Baroda</option>
                                    <option value="Canara">Canara Bank</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="netbankingUserId">User ID:</label>
                                <input type="text" id="netbankingUserId" placeholder="Enter your banking user ID">
                            </div>
                        </div>

                        <!-- Wallet Fields -->
                        <div id="walletFields" style="display:none;">
                            <div class="form-group">
                                <label for="walletType">Wallet Type:</label>
                                <select id="walletType">
                                    <option value="">-- Select Wallet --</option>
                                    <option value="Paytm">Paytm</option>
                                    <option value="PhonePe">PhonePe</option>
                                    <option value="GooglePay">Google Pay</option>
                                    <option value="AmazonPay">Amazon Pay</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="walletMobile">Mobile Number:</label>
                                <input type="tel" id="walletMobile" placeholder="Enter registered mobile number">
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="booking-button">Complete Booking & Pay</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Booking Confirmation -->
    <section id="confirmationSection" style="display:none;">
        <div class="container">
            <div class="confirmation-card">
                <h2>‚úì Booking Confirmed!</h2>
                <div class="ticket-container">
                    <div class="ticket">
                        <div class="ticket-header">
                            <div class="railway-logo">üöÇ RailYatra</div>
                            <div class="ticket-title">RAILWAY TICKET</div>
                            <div class="ticket-number-display" id="ticketNumberDisplay"></div>
                        </div>

                        <div class="ticket-content">
                                <div class="ticket-section">
                                    <h4>Passenger Details</h4>
                                    <div class="ticket-row">
                                        <span class="label">Name:</span>
                                        <span class="value" id="ticketName"></span>
                                    </div>
                                    <div class="ticket-row">
                                        <span class="label">Age:</span>
                                        <span class="value" id="ticketAge"></span>
                                    </div>
                                    <div class="ticket-row">
                                        <span class="label">Gender:</span>
                                        <span class="value" id="ticketGender"></span>
                                    </div>
                                    <div class="ticket-row">
                                        <span class="label">Email:</span>
                                        <span class="value" id="ticketEmail"></span>
                                    </div>
                                    <div class="ticket-row">
                                        <span class="label">Phone:</span>
                                        <span class="value" id="ticketPhone"></span>
                                    </div>
                                    <div class="ticket-row">
                                        <span class="label">Number of Seats:</span>
                                        <span class="value" id="ticketSeats"></span>
                                    </div>
                                </div>                            <div class="ticket-divider"></div>

                            <div class="ticket-section">
                                <h4>Journey Details</h4>
                                <div class="journey-info">
                                    <div class="station-info">
                                        <span class="station-label">FROM</span>
                                        <span class="station-name" id="ticketFrom"></span>
                                    </div>
                                    <div class="journey-arrow">‚Üí</div>
                                    <div class="station-info">
                                        <span class="station-label">TO</span>
                                        <span class="station-name" id="ticketTo"></span>
                                    </div>
                                </div>

                                <div class="ticket-row" style="margin-top: 1.5rem;">
                                    <span class="label">Train:</span>
                                    <span class="value" id="ticketTrain"></span>
                                </div>
                                <div class="ticket-row">
                                    <span class="label">Train Number:</span>
                                    <span class="value" id="ticketTrainNo"></span>
                                </div>
                                <div class="ticket-row">
                                    <span class="label">Class:</span>
                                    <span class="value" id="ticketClass"></span>
                                </div>
                            </div>

                            <div class="ticket-divider"></div>

                            <div class="ticket-section">
                                <h4>Fare Details</h4>
                                <div class="ticket-row fare-row">
                                    <span class="label">Ticket Price:</span>
                                    <span class="value fare-value" id="ticketPrice"></span>
                                </div>
                            </div>

                            <div class="ticket-divider"></div>

                            <div class="ticket-section">
                                <h4>Payment Details</h4>
                                <div class="ticket-row">
                                    <span class="label">Payment Method:</span>
                                    <span class="value" id="ticketPaymentMethod"></span>
                                </div>
                                <div class="ticket-row" id="ticketPaymentDetailsRow" style="display:none;">
                                    <span class="label">Payment Details:</span>
                                    <span class="value" id="ticketPaymentDetails"></span>
                                </div>
                                <div class="ticket-row">
                                    <span class="label">Payment Status:</span>
                                    <span class="value" style="color: #10b981; font-weight: 700;">‚úì Paid</span>
                                </div>
                            </div>

                            <div class="ticket-divider"></div>

                            <div class="ticket-qr-section">
                                <h4>Ticket Verification</h4>
                                <div class="qr-container" id="qrCodeContainer"></div>
                            </div>

                            <div class="ticket-footer">
                                <p>Thank you for booking with us!</p>
                                <p style="font-size: 0.85rem; color: #666;">Please carry this confirmation during your journey</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="print-button" onclick="printTicket()">üñ®Ô∏è Print Ticket</button>
                    <button class="download-button" onclick="downloadTicket()">‚¨áÔ∏è Download PDF</button>
                    <button class="new-booking-button" onclick="resetBooking()">‚ûï New Booking</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 RailYatra. All rights reserved.</p>
            <p>Contact: support@railyatra.com | Phone: 1800-RAILYATRA</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Handle booking redirect from trains page
        window.addEventListener('load', function() {
            const bookingFrom = sessionStorage.getItem('bookingFrom');
            const bookingTo = sessionStorage.getItem('bookingTo');
            
            if (bookingFrom && bookingTo) {
                // Pre-fill the booking form
                document.getElementById('source').value = bookingFrom;
                document.getElementById('destination').value = bookingTo;
                
                // Clear the session storage
                sessionStorage.removeItem('bookingFrom');
                sessionStorage.removeItem('bookingTo');
                
                // Trigger search automatically
                setTimeout(function() {
                    searchTrains();
                }, 500);
            }
        });
    </script>
</body>
</html>
